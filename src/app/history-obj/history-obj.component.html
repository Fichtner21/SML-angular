<section>
  <div class="container">
    <ng-container *ngIf="historyObj$ | async as historyObj">
      <ng-container *ngIf="historyObj.length > 0">
        <div>
          <div *ngFor="let i = index; let match of historyObj | paginate: {itemsPerPage: 20, currentPage: p}">
            <div class="match-row">
              <div class="match-row__date">
                <div>{{ match.timestamp | date:'dd.MM.yyyy HH:mm' }}</div>                
                <a routerLink="/obj-matches/{{match.idwar}}">#{{ match.idwar }}</a>
                <div *ngIf="match.video.length > 0">
                  <img src="../../assets/images/icons/video.svg" alt="" class="video-icon">
                </div> 
                <!-- <app-single-match (commentsEmitter)="onChildComments($event)"></app-single-match> -->
                <!-- <app-single-match [comments]="comments$ | async" (lengthEmitter)="updateComments($event)"></app-single-match>                 -->
                <!-- <div>{{ getCommentsForMatch(match.idwar) | json }}</div> -->
               <!-- <div>{{ match.comments }}</div> -->
              </div>
              <div class="match-row__team" [class]="match.flag ? match.flag : ''">
                <div class="teamrounds">{{ match.t1roundswon }}</div>
                <div class="teaminfo">
                  <div>preELO</div>
                  <div>{{ 'matches.name' | translate }}</div>
                  <div>{{ 'matches.frags' | translate }}</div>
                  <div>postELO</div>
                  <div>{{ 'matches.pc' | translate }}</div>
                </div>
                <div class="match-row__team--player">
                  <div>{{ match.t1p1preelo | number: '.1-2' }}</div>
                  <div class="match-row__team--player__name"><a routerLink="/obj-ranking/{{match.t1p1username}}">{{ match.t1p1playername.name }}</a></div>
                  <div class="match-row__team--player__score">{{ match.t1p1score }} </div>
                  <div>{{ match.t1p1postelo | number: '.1-2' }}</div>
                  <div [ngClass]="{ 'won': (match.t1p1postelo - match.t1p1preelo) > 0, 'lost': (match.t1p1postelo - match.t1p1preelo) < 0, 'draw': (match.t1p1postelo - match.t1p1preelo === 0) }"><span>{{ match.t1p1postelo - match.t1p1preelo | number: '.1-2'}}</span></div>
                </div>
                <div class="match-row__team--player" *ngIf="( match.t1p2playername | keyvalue)?.length">
                  <div>{{ match.t1p2preelo | number: '.1-2' }}</div>
                  <div class="match-row__team--player__name"><a routerLink="/obj-ranking/{{match.t1p2username}}">{{ match.t1p2playername.name }}</a></div>
                  <div class="match-row__team--player__score">{{ match.t1p2score }} </div>
                  <div>{{ match.t1p2postelo | number: '.1-2' }}</div>
                  <div [ngClass]="{ 'won': (match.t1p2postelo - match.t1p2preelo) > 0, 'lost': (match.t1p2postelo - match.t1p2preelo) < 0, 'draw': (match.t1p2postelo - match.t1p2preelo === 0) }"><span>{{ match.t1p2postelo - match.t1p2preelo | number: '.1-2'}}</span></div>
                </div>
                <div class="match-row__team--player" *ngIf="( match.t1p3playername | keyvalue)?.length">
                  <div>{{ match.t1p3preelo | number: '.1-2' }}</div>
                  <div class="match-row__team--player__name"><a routerLink="/obj-ranking/{{match.t1p3username}}">{{ match.t1p3playername.name }}</a></div>
                  <div class="match-row__team--player__score">{{ match.t1p3score }} </div>
                  <div>{{ match.t1p3postelo | number: '.1-2' }}</div>
                  <div [ngClass]="{ 'won': (match.t1p3postelo - match.t1p3preelo) > 0, 'lost': (match.t1p3postelo - match.t1p3preelo) < 0, 'draw': (match.t1p3postelo - match.t1p3preelo === 0) }"><span>{{ match.t1p3postelo - match.t1p3preelo | number: '.1-2'}}</span></div>
                </div>
                <div class="match-row__team--player" *ngIf="( match.t1p4playername | keyvalue)?.length">
                  <div>{{ match.t1p4preelo | number: '.1-2' }}</div>
                  <div class="match-row__team--player__name"><a routerLink="/obj-ranking/{{match.t1p4username}}">{{ match.t1p4playername.name }}</a></div>
                  <div class="match-row__team--player__score">{{ match.t1p4score }} </div>
                  <div>{{ match.t1p4postelo | number: '.1-2' }}</div>
                  <div [ngClass]="{ 'won': (match.t1p4postelo - match.t1p4preelo) > 0, 'lost': (match.t1p4postelo - match.t1p4preelo) < 0, 'draw': (match.t1p4postelo - match.t1p4preelo === 0) }"><span>{{ match.t1p4postelo - match.t1p4preelo | number: '.1-2'}}</span></div>
                </div>
                <div class="match-row__team--player" *ngIf="( match.t1p5playername | keyvalue)?.length">
                  <div>{{ match.t1p5preelo | number: '.1-2' }}</div>
                  <div class="match-row__team--player__name"><a routerLink="/obj-ranking/{{match.t1p5username}}">{{ match.t1p5playername.name }}</a></div>
                  <div class="match-row__team--player__score">{{ match.t1p5score }} </div>
                  <div>{{ match.t1p5postelo | number: '.1-2' }}</div>
                  <div [ngClass]="{ 'won': (match.t1p5postelo - match.t1p5preelo) > 0, 'lost': (match.t1p5postelo - match.t1p5preelo) < 0, 'draw': (match.t1p5postelo - match.t1p5preelo === 0) }"><span>{{ match.t1p5postelo - match.t1p5preelo | number: '.1-2'}}</span></div>
                </div>
                <div class="match-row__team--player" *ngIf="( match.t1p6playername | keyvalue)?.length">
                  <div>{{ match.t1p6preelo | number: '.1-2' }}</div>
                  <div class="match-row__team--player__name"><a routerLink="/obj-ranking/{{match.t1p6username}}">{{ match.t1p6playername.name }}</a></div>
                  <div class="match-row__team--player__score">{{ match.t1p6score }} </div>
                  <div>{{ match.t1p6postelo | number: '.1-2' }}</div>
                  <div [ngClass]="{ 'won': (match.t1p6postelo - match.t1p6preelo) > 0, 'lost': (match.t1p6postelo - match.t1p6preelo) < 0, 'draw': (match.t1p6postelo - match.t1p6preelo === 0) }"><span>{{ match.t1p6postelo - match.t1p6preelo | number: '.1-2'}}</span></div>
                </div>
                <div class="match-row__team--player" *ngIf="( match.t1p7playername | keyvalue)?.length">
                  <div>{{ match.t1p7preelo | number: '.1-2' }}</div>
                  <div class="match-row__team--player__name"><a routerLink="/obj-ranking/{{match.t1p7username}}">{{ match.t1p7playername.name }}</a></div>
                  <div class="match-row__team--player__score">{{ match.t1p7score }} </div>
                  <div>{{ match.t1p7postelo | number: '.1-2' }}</div>
                  <div [ngClass]="{ 'won': (match.t1p7postelo - match.t1p7preelo) > 0, 'lost': (match.t1p7postelo - match.t1p7preelo) < 0, 'draw': (match.t1p7postelo - match.t1p7preelo === 0) }"><span>{{ match.t1p7postelo - match.t1p7preelo | number: '.1-2'}}</span></div>
                </div>   
                <div class="preelo-info">
                  <div class="preelo_war">preELO before war: {{ match.t1preelo | number:'1.0-2'}}</div>            
                  <div [ngClass]="{ 'teamFavorite': (match.t1preelo > match.t2preelo), 'teamNotFavorite': (match.t2preelo > match.t1preelo), 'teamWithoutFavorite': (match.t2preelo == match.t1preelo) }">Chance for win: {{  match.t2chance | number:'1.0-2'}} %</div> 
                </div>  
                <!-- <div class="preelo-info">
                  <div class="bet">
                    <img src="../../assets/images/80-163.png" alt="">
                    <div class="bet-odd">{{ betOdd(match.t2chance) }}</div> 
                  </div>
                  <div class="bet">
                    <img src="../../assets/images/80-165.png" alt="">
                    <div class="bet-odd">{{ betOdd(match.t2chance) }}</div> 
                  </div>                   
                </div>                                -->
              </div>
              <div class="match-row__team">
                <div class="teamrounds">{{ match.t2roundswon }}</div>
                <div class="teaminfo">
                  <div>preELO</div>
                  <div>{{ 'matches.name' | translate }}</div>
                  <div>{{ 'matches.frags' | translate }}</div>
                  <div>postELO</div>
                  <div>{{ 'matches.pc' | translate}}</div>
                </div>
                <div class="match-row__team--player">
                  <div>{{ match.t2p1preelo | number: '.1-2' }}</div>
                  <div class="match-row__team--player__name"><a routerLink="/obj-ranking/{{match.t2p1username}}">{{ match.t2p1playername.name }}</a></div>
                  <div class="match-row__team--player__score">{{ match.t2p1score }} </div>
                  <div>{{ match.t2p1postelo | number: '.1-2' }}</div>
                  <div [ngClass]="{ 'won': (match.t2p1postelo - match.t2p1preelo) > 0, 'lost': (match.t2p1postelo - match.t2p1preelo) < 0, 'draw': (match.t2p1postelo - match.t2p1preelo === 0) }"><span>{{ match.t2p1postelo - match.t2p1preelo | number: '.1-2'}}</span></div>
                </div>
                <div class="match-row__team--player" *ngIf="match.t2p2username !== ''">
                  <div>{{ match.t2p2preelo | number: '.1-2' }}</div>
                  <div class="match-row__team--player__name"><a routerLink="/obj-ranking/{{match.t2p2username}}">{{ match.t2p2playername.name }}</a></div>
                  <div class="match-row__team--player__score">{{ match.t2p2score }} </div>
                  <div>{{ match.t2p2postelo | number: '.1-2' }}</div>
                  <div [ngClass]="{ 'won': (match.t2p2postelo - match.t2p2preelo) > 0, 'lost': (match.t2p2postelo - match.t2p2preelo) < 0, 'draw': (match.t2p2postelo - match.t2p2preelo === 0) }"><span>{{ match.t2p2postelo - match.t2p2preelo | number: '.1-2'}}</span></div>
                </div>
                <div class="match-row__team--player" *ngIf="match.t2p3username !== ''">
                  <div>{{ match.t2p3preelo | number: '.1-2' }}</div>
                  <div class="match-row__team--player__name"><a routerLink="/obj-ranking/{{match.t2p3username}}">{{ match.t2p3playername.name }}</a></div>
                  <div class="match-row__team--player__score">{{ match.t2p3score }} </div>
                  <div>{{ match.t2p3postelo | number: '.1-2' }}</div>
                  <div [ngClass]="{ 'won': (match.t2p3postelo - match.t2p3preelo) > 0, 'lost': (match.t2p3postelo - match.t2p3preelo) < 0, 'draw': (match.t2p3postelo - match.t2p3preelo === 0) }"><span>{{ match.t2p3postelo - match.t2p3preelo | number: '.1-2'}}</span></div>
                </div>
                <div class="match-row__team--player" *ngIf="match.t2p4username !== ''">
                  <div>{{ match.t2p4preelo | number: '.1-2' }}</div>
                  <div class="match-row__team--player__name"><a routerLink="/obj-ranking/{{match.t2p4username}}">{{ match.t2p4playername.name }}</a></div>
                  <div class="match-row__team--player__score">{{ match.t2p4score }} </div>
                  <div>{{ match.t2p4postelo | number: '.1-2' }}</div>
                  <div [ngClass]="{ 'won': (match.t2p4postelo - match.t2p4preelo) > 0, 'lost': (match.t2p4postelo - match.t2p4preelo) < 0, 'draw': (match.t2p4postelo - match.t2p4preelo === 0) }"><span>{{ match.t2p4postelo - match.t2p4preelo | number: '.1-2'}}</span></div>
                </div>
                <div class="match-row__team--player" *ngIf="match.t2p5username !== ''">
                  <div>{{ match.t2p5preelo | number: '.1-2' }}</div>
                  <div class="match-row__team--player__name"><a routerLink="/obj-ranking/{{match.t2p5username}}">{{ match.t2p5playername.name }}</a></div>
                  <div class="match-row__team--player__score">{{ match.t2p5score }} </div>
                  <div>{{ match.t2p5postelo | number: '.1-2' }}</div>
                  <div [ngClass]="{ 'won': (match.t2p5postelo - match.t2p5preelo) > 0, 'lost': (match.t2p5postelo - match.t2p5preelo) < 0, 'draw': (match.t2p5postelo - match.t2p5preelo === 0) }"><span>{{ match.t2p5postelo - match.t2p5preelo | number: '.1-2'}}</span></div>
                </div>
                <div class="match-row__team--player" *ngIf="match.t2p6username !== ''">
                  <div>{{ match.t2p6preelo | number: '1.0-2' }}</div>
                  <div class="match-row__team--player__name"><a routerLink="/obj-ranking/{{match.t2p6username}}">{{ match.t2p6playername.name }}</a></div>
                  <div class="match-row__team--player__score">{{ match.t2p6score }} </div>
                  <div>{{ match.t2p6postelo | number: '1.0-2' }}</div>
                  <div [ngClass]="{ 'won': (match.t2p6postelo - match.t2p6preelo) > 0, 'lost': (match.t2p6postelo - match.t2p6preelo) < 0, 'draw': (match.t2p6postelo - match.t2p6preelo === 0) }"><span>{{ match.t2p6postelo - match.t2p6preelo | number: '.1-2'}}</span></div>
                </div>
                <div class="match-row__team--player" *ngIf="match.t2p7username !== ''">
                  <div>{{ match.t2p7preelo | number: '.1-2' }}</div>
                  <div class="match-row__team--player__name"><a routerLink="/obj-ranking/{{match.t2p7username}}">{{ match.t2p7playername.name }}</a></div>
                  <div class="match-row__team--player__score">{{ match.t2p7score }} </div>
                  <div>{{ match.t2p7postelo | number: '.1-2' }}</div>
                  <div [ngClass]="{ 'won': (match.t2p7postelo - match.t2p7preelo) > 0, 'lost': (match.t2p7postelo - match.t2p7preelo) < 0, 'draw': (match.t2p7postelo - match.t2p7preelo === 0) }"><span>{{ match.t2p7postelo - match.t2p7preelo | number: '.1-2'}}</span></div>
                </div>
                <div class="preelo-info">
                  <div class="preelo_war">preELO before war: {{ match.t2preelo | number:'1.0-2'}}</div>
                  <div [ngClass]="{ 'teamFavorite': (match.t2preelo > match.t1preelo), 'teamNotFavorite': (match.t1preelo > match.t2preelo), 'teamWithoutFavorite': (match.t2preelo == match.t1preelo) }">Chance for win: {{ match.t1chance }} %</div>
                </div>
                <!-- <div class="preelo-info">
                  <div class="bet">
                    <img src="../../assets/images/80-163.png" alt="">
                    <div class="bet-odd">{{ betOdd(match.t1chance) }}</div> 
                  </div>
                  <div class="bet">
                    <img src="../../assets/images/80-165.png" alt="">
                    <div class="bet-odd">{{ betOdd(match.t1chance) }}</div> 
                  </div>                   
                </div>                  -->
              </div>
            </div>
          </div>
          <pagination-controls (pageChange)="p = $event" class="my-pagination"></pagination-controls>          
        </div>
      </ng-container>
    </ng-container>
  </div>
</section> 

<ng-http-loader 
    [backdrop]="false"
    [backgroundColor]="'#010141'"
    [debounceDelay]="100"
    [extraDuration]="300"
    [minDuration]="300"
    [opacity]=".6"
    [backdropBackgroundColor]="'#777777'"
    [spinner]="spinkit.skWave">
</ng-http-loader>